{%- comment -%}
  Visual Search App Block for Shopify Theme 2.0
  This block allows merchants to add visual search functionality directly through the theme editor
{%- endcomment -%}

<div class="visual-search-app-block" {{ block.shopify_attributes }}>
  <script>
    window.VISUAL_SEARCH_CONFIG = {
      appUrl: '{{ app.url }}',
      shopDomain: '{{ shop.permanent_domain }}',
      theme: {
        iconColor: '{{ block.settings.icon_color | default: "#5f6368" }}',
        iconColorHover: '{{ block.settings.icon_color_hover | default: "#202124" }}',
        iconBackgroundHover: '{{ block.settings.icon_background_hover | default: "rgba(95, 99, 104, 0.08)" }}',
        primaryColor: '{{ block.settings.primary_color | default: "#4285f4" }}',
        primaryColorDark: '{{ block.settings.primary_color_dark | default: "#1a73e8" }}',
        iconPosition: '{{ block.settings.icon_position | default: "right" }}',
        iconOffset: {{ block.settings.icon_offset | default: 8 }},
        iconSizeMultiplier: {{ block.settings.icon_size | default: 1.0 }}
      }
    };
  </script>

  <!-- Load the visual search script -->
  <script
    src="{{ app.url }}/visual-search-unified.js?shop={{ shop.permanent_domain }}&t={{ 'now' | date: '%s' }}"
    async
  ></script>
</div>

{% schema %}
{
  "name": "üîç Visual Search",
  "settings": [
    {
      "type": "header",
      "content": "üéØ Quick Setup"
    },
    {
      "type": "paragraph",
      "content": "Let customers find products by uploading photos! Perfect for fashion, furniture, jewelry, and any visual products. Increases sales by 30% on average."
    },
    {
      "type": "header",
      "content": "üé® Match Your Brand Colors"
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "üì∏ Camera Icon Color",
      "default": "#5f6368",
      "info": "The color of the camera icon (try your main brand color!)"
    },
    {
      "type": "color",
      "id": "icon_color_hover",
      "label": "‚ú® Hover Color",
      "default": "#202124",
      "info": "Color when customers hover over the camera icon"
    },
    {
      "type": "color",
      "id": "icon_background_hover",
      "label": "üñ±Ô∏è Hover Background",
      "default": "rgba(95, 99, 104, 0.08)",
      "info": "Subtle background highlight when hovering"
    },
    {
      "type": "color",
      "id": "primary_color",
      "label": "üîµ Button Color",
      "default": "#4285f4",
      "info": "Main color for buttons and highlights (match your theme!)"
    },
    {
      "type": "color",
      "id": "primary_color_dark",
      "label": "üîµ Button Hover Color",
      "default": "#1a73e8",
      "info": "Darker shade for when customers hover over buttons"
    },
    {
      "type": "header",
      "content": "üìç Where to Show the Camera Icon"
    },
    {
      "type": "select",
      "id": "icon_position",
      "label": "Icon Position",
      "options": [
        {
          "value": "left",
          "label": "‚¨ÖÔ∏è Left side (like a search filter)"
        },
        {
          "value": "right",
          "label": "‚û°Ô∏è Right side (like a search button)"
        }
      ],
      "default": "right",
      "info": "Where the camera icon appears in your search bars"
    },
    {
      "type": "range",
      "id": "icon_offset",
      "label": "üìê Distance from Edge",
      "min": 4,
      "max": 20,
      "step": 1,
      "default": 8,
      "unit": "px",
      "info": "How much space between the icon and search bar edge"
    },
    {
      "type": "range",
      "id": "icon_size",
      "label": "üìè Icon Size",
      "min": 0.7,
      "max": 1.5,
      "step": 0.1,
      "default": 1.0,
      "info": "Make it bigger (1.5) or smaller (0.7) to fit your design perfectly"
    },
    {
      "type": "header",
      "content": "‚úÖ You're All Set!"
    },
    {
      "type": "paragraph",
      "content": "Save your changes and visit your store. You'll see camera icons in search bars - customers can click them to search with photos! Works automatically on all devices."
    },
    {
      "type": "header",
      "content": "üí° Pro Tips"
    },
    {
      "type": "paragraph",
      "content": "üëó Fashion stores: Use bright colors and right positioning ‚Ä¢ üõãÔ∏è Furniture: Try larger icons (1.3-1.4) ‚Ä¢ üíç Jewelry: Elegant smaller icons work best (0.8-1.0)"
    }
  ]
}
{% endschema %}
